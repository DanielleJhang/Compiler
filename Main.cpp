/* ================================================================================================================================================================================================================================================================================================ */
/* ================================================================================================================================================================================================================================================================================================ */
/* ================================================================================================================================================================================================================================================================================================ */
/*
[CSC 446] Construct Compiler

Assignment # 1 : Lexical analyzer

Student ID 7354802
Ji eun Jhang
*/
/* ================================================================================================================================================================================================================================================================================================ */
/* ================================================================================================================================================================================================================================================================================================ */
/* ================================================================================================================================================================================================================================================================================================ */


#include "Hash.h"

using namespace std;

char tacfilename[40];

int main(int argc, char* argv[])
{
	char fileName[256];
	char *inputfilename;
	int index = 0;
	ifstream infile;

	Initialization();

	if (argc > 1)
	{
		infile.open(argv[1]);

		inputfilename = argv[1];

		while (inputfilename[index] != '.' && inputfilename[index] != '\0')
		{
			tacfilename[index] = inputfilename[index++];
		}

		tacfilename[index++] = '.';
		tacfilename[index++] = 't';
		tacfilename[index++] = 'a';
		tacfilename[index++] = 'c';
		tacfilename[index++] = '\0';

	}

	else
	{
		cout << endl << "Enter the name of the file: ";
		cin.get(fileName, 256);

		infile.open(fileName);

		inputfilename = fileName;

		while (inputfilename[index] != '.' && inputfilename[index] != '\0')
		{
			tacfilename[index] = inputfilename[index++];
		}

		tacfilename[index++] = '.';
		tacfilename[index++] = 't';
		tacfilename[index++] = 'a';
		tacfilename[index++] = 'c';
		tacfilename[index++] = '\0';

	}

	if (infile.is_open())
	{
		ProcessToken(infile);

		cout << endl << endl;

		ofstream outFile(tacfilename, ios::out);
		Goal(outFile);
		outFile.close();

		cout << endl;
		//WriteTable(1);
		cout << endl;

		return 0;
	}


	else
	{
		cout << "[Error] There is a problem to open your file" << endl;
		exit(1);
	}

};
